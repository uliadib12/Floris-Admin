import"./onInit.tzFMZM2B.js";class c{time;earnMonth;earnAnnual;orderMonth;orderRequest;earningOverview;revenueSources;revenuePayment;constructor({time:r,earnMonth:n,earnAnnual:t,orderMonth:o,orderRequest:a,earningOverview:s,revenueSources:i,revenuePayment:m}){this.time=r,this.earnMonth=n,this.earnAnnual=t,this.orderMonth=o,this.orderRequest=a,this.earningOverview=s,this.revenueSources=i,this.revenuePayment=m}}class l{static toRupiah(r){return r.toLocaleString("id-ID",{style:"currency",currency:"IDR"}).replace(",00","")}}f();async function f(){const e=new Date().getFullYear(),n=new URLSearchParams(window.location.search).get("year");if(n!==null){const t=await h(n);y(t),u(n),d(),g()}else{const t=await h(e.toString());y(t),u(e.toString()),d(),g()}}function d(){const e=$("#yearCalender")[0];e.addEventListener("change",()=>{const r=e.value;if(r===new Date().getFullYear().toString()){window.location.href="/";return}window.location.href=`/?year=${r}`})}function p(){const e=new Date().getFullYear();return Array.from({length:e-2023+1},(n,t)=>e-t)}function v(e){let n=new URLSearchParams(window.location.search).get("year");n===null&&(n=new Date().getFullYear().toString());const t=$("#yearCalender")[0];e.forEach(o=>{const a=document.createElement("option");a.value=o.toString(),a.innerText=o.toString(),n===o.toString()&&a.setAttribute("selected",""),t.appendChild(a)})}function u(e){const r=$("#year")[0];r.innerHTML=e}function g(){$("#content-dashboard").removeClass("invisible")}function h(e){return new Promise((r,n)=>{r(e==="2023"?new c({time:"2021-08-21",earnMonth:1e6,earnAnnual:1e7,orderMonth:100,orderRequest:100,earningOverview:{Jan:1e6,Feb:2e6,Mar:3e6,Apr:4e6,May:5e6,Jun:6e6,Jul:7e6,Aug:8e6,Sep:9e6,Oct:1e7,Nov:11e6,Dec:12e6},revenueSources:{"Papan Bunga":2e6,Bouquet:2e6,"Money Cake":3e6,"Snack Tower":4e6},revenuePayment:{COD:2e6,Transfer:2e6}}):new c({time:"2021-08-21",earnMonth:2e6,earnAnnual:2e7,orderMonth:200,orderRequest:200,earningOverview:{Jan:1e6,Feb:2e6,Mar:3e6,Apr:4e6,May:5e6,Jun:6e6,Jul:7e6,Aug:8e6,Sep:9e6,Oct:1e7,Nov:11e6,Dec:12e6},revenueSources:{"Papan Bunga":1e6,Bouquet:2e6,"Money Cake":3e6,"Snack Tower":4e6},revenuePayment:{COD:1e6,Transfer:2e6}}))})}function C(){const e=p();v(e)}function y(e){C(),$("#earn-month").text(l.toRupiah(e.earnMonth)),$("#earn-annual").text(l.toRupiah(e.earnAnnual)),$("#order-month").text(e.orderMonth),$("#order-request").text(e.orderRequest),w("earn-overview",e.earningOverview),b("revenue-sources","revenue-sources-legend",e.revenueSources),b("payment-sources","payment-sources-legend",e.revenuePayment)}function w(e,r){var n=document.getElementById(e);new Chart(n,{type:"line",data:{labels:Object.keys(r),datasets:[{label:"Earnings",lineTension:.3,backgroundColor:"rgba(78, 115, 223, 0.05)",borderColor:"rgba(78, 115, 223, 1)",pointRadius:3,pointBackgroundColor:"rgba(78, 115, 223, 1)",pointBorderColor:"rgba(78, 115, 223, 1)",pointHoverRadius:3,pointHoverBackgroundColor:"rgba(78, 115, 223, 1)",pointHoverBorderColor:"rgba(78, 115, 223, 1)",pointHitRadius:10,pointBorderWidth:2,data:Object.values(r)}]},options:{maintainAspectRatio:!1,layout:{padding:{left:10,right:25,top:25,bottom:0}},scales:{xAxes:[{time:{unit:"date"},gridLines:{display:!1,drawBorder:!1},ticks:{maxTicksLimit:7}}],yAxes:[{ticks:{maxTicksLimit:5,padding:10,callback:function(t,o,a){return t.toLocaleString("id-ID",{style:"currency",currency:"IDR"}).replace(",00","")}},gridLines:{color:"rgb(234, 236, 244)",zeroLineColor:"rgb(234, 236, 244)",drawBorder:!1,borderDash:[2],zeroLineBorderDash:[2]}}]},legend:{display:!1},tooltips:{backgroundColor:"rgb(255,255,255)",bodyFontColor:"#858796",titleMarginBottom:10,titleFontColor:"#6e707e",titleFontSize:14,borderColor:"#dddfeb",borderWidth:1,xPadding:15,yPadding:15,displayColors:!1,intersect:!1,mode:"index",caretPadding:10,callbacks:{label:function(t,o){var a=o.datasets[t.datasetIndex].label||"";return a+": $"+number_format(t.yLabel)}}}}})}function b(e,r,n){const t=document.getElementById(r);Object.keys(n).forEach((a,s)=>{const i=document.createElement("div");i.classList.add("mr-2"),i.classList.add("d-inline-block"),i.innerHTML=`
            <i class="fas fa-circle" style="color: ${["#4e73df","#1cc88a","#36b9cc","#f6c23e"][s]}"></i>
            ${a}
        `,t?.appendChild(i)});var o=document.getElementById(e);new Chart(o,{type:"doughnut",data:{labels:Object.keys(n),datasets:[{data:Object.values(n),backgroundColor:Object.keys(n).map((a,s)=>["#4e73df","#1cc88a","#36b9cc","#f6c23e"][s]),hoverBackgroundColor:["#2e59d9","#17a673","#2c9faf"],hoverBorderColor:"rgba(234, 236, 244, 1)"}]},options:{maintainAspectRatio:!1,tooltips:{backgroundColor:"rgb(255,255,255)",bodyFontColor:"#858796",borderColor:"#dddfeb",borderWidth:1,xPadding:15,yPadding:15,displayColors:!1,caretPadding:10},legend:{display:!1},cutoutPercentage:80}})}

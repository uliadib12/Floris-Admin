import"./hoisted.tzFMZM2B.js";class o{name;email;phone;address;day;time;constructor({name:t="",email:n="",phone:e="",address:s="",day:r="",time:i=""}){this.name=t,this.email=n,this.phone=e,this.address=s,this.day=r,this.time=i}static fromJson(t){return new o({name:t.name,email:t.email,phone:t.phone,address:t.address,day:t.day,time:t.time})}}class d{id;email;createdDate;banned;constructor({id:t=0,email:n="",createdDate:e="",banned:s=!1}){this.id=t,this.email=n,this.createdDate=e,this.banned=s}static fromJson(t){return new d({id:t.id,email:t.email,createdDate:t.createdDate,banned:t.banned})}}class p{id;user;address;products;payment;price;orderDate;orderStatus;nextStep;constructor({id:t=0,user:n=void 0,address:e=new o({}),products:s=[],payment:r={name:""},price:i=0,orderDate:l="",orderStatus:c="",nextStep:u=void 0}){this.id=t,this.user=n,this.address=e,this.products=s,this.payment=r,this.price=i,this.orderDate=l,this.orderStatus=c,this.nextStep=u}}class g{name;variant;quantity;additionalInfo;price;constructor({name:t="",variant:n="",quantity:e=0,additionalInfo:s="",price:r=0}){this.name=t,this.variant=n,this.quantity=e,this.additionalInfo=s,this.price=r}}D();async function D(){const t=new URLSearchParams(window.location.search).get("year");if(t!==null){const n=await h();b(n),y(t),f(),w()}else{const n=new Date().getFullYear(),e=await h(n.toString());b(e),y(n.toString()),f(),w()}}function h(a){return new Promise((t,n)=>{t([new p({id:1,user:new d({id:1,email:"test",createdDate:"test",banned:!1}),address:new o({name:"test",email:"test",phone:"test",address:"Jl. Test",day:"test",time:"test"}),products:[new g({name:"test",variant:"test",quantity:1,additionalInfo:"test",price:1})],payment:{name:"test"},price:1,orderDate:"test",orderStatus:"test",nextStep:[{type:{name:"success",color:"success"},name:"next step"}]}),new p({id:2,user:new d({id:2,email:"test2",createdDate:"test2",banned:!1}),address:new o({name:"test",email:"test",phone:"test",address:"Jl. Test",day:"test",time:"test"}),products:[new g({name:"test",variant:"test",quantity:1,additionalInfo:"test",price:1})],payment:{name:"test"},price:1,orderDate:"test",orderStatus:"test",nextStep:[{type:{name:"test",color:"test"},name:"test"}]})])})}function b(a){const n=$("#dataTable")[0].tBodies[0];a.forEach(e=>{const s=n.insertRow(),r=s.insertCell(),i=s.insertCell(),l=s.insertCell(),c=s.insertCell(),u=s.insertCell(),S=s.insertCell(),C=s.insertCell(),T=s.insertCell(),L=s.insertCell();r.innerText=e.id.toString(),i.innerHTML=e.user?A(e.user).outerHTML:"-",l.innerHTML=E(e.address).outerHTML,c.innerHTML=P(e.products).outerHTML,u.innerHTML=e.payment.name,S.innerHTML=e.price.toString(),C.innerHTML=e.orderDate,T.innerHTML=e.orderStatus,L.innerHTML=e.nextStep.map(m=>`<button class="badge badge-${m.type.color}">${m.name}</button>`).join(" ")}),v(),O(),J()}function y(a){const t=$("#year")[0];t.innerText=a}function M(){const a=new Date().getFullYear();return Array.from({length:a-2023+1},(n,e)=>a-e)}function f(){const a=$("#yearCalender")[0];a.addEventListener("change",()=>{const n=a.value,e=window.location.pathname;if(n===new Date().getFullYear().toString()){window.location.href=e;return}window.location.href=`${e}?year=${n}`});const t=M();x(t)}function x(a){let n=new URLSearchParams(window.location.search).get("year");n===null&&(n=new Date().getFullYear().toString());const e=$("#yearCalender")[0];a.forEach(s=>{const r=document.createElement("option");r.value=s.toString(),r.innerText=s.toString(),n===s.toString()&&(r.selected=!0),e.appendChild(r)})}function w(){$("#content-order")[0].classList.remove("invisible")}function A(a){const t=document.createElement("button");return t.classList.add("btn","btn-primary","user-modal-button"),t.setAttribute("data-toggle","modal"),t.setAttribute("data-target","#modal"),t.setAttribute("data-user",JSON.stringify(a)),t.innerText=a.id.toString(),t}function v(){const a=$(".user-modal-button");$(a).on("click",function(){const t=d.fromJson(JSON.parse($(this).attr("data-user"))),n=$("#modal");n.find(".modal-title").text(`user ${t.id}`),n.find(".modal-body").html(`
            <p><strong>Email:</strong> ${t.email}</p>
            <p><strong>Created Date:</strong> ${t.createdDate}</p>
            <p><strong>Banned:</strong> ${t.banned?"Yes":"No"}</p>
        `)})}function E(a){const t=document.createElement("button");return t.classList.add("btn","btn-primary","address-modal-button"),t.setAttribute("data-toggle","modal"),t.setAttribute("data-target","#modal"),t.setAttribute("data-address",JSON.stringify(a)),t.innerText=a.address.toString(),t}function O(){const a=$(".address-modal-button");$(a).on("click",function(){const t=o.fromJson(JSON.parse($(this).attr("data-address"))),n=$("#modal");n.find(".modal-title").text(`address ${t.name}`),n.find(".modal-body").html(`
            <p><strong>Name:</strong> ${t.name}</p>
            <p><strong>Email:</strong> ${t.email}</p>
            <p><strong>Phone:</strong> ${t.phone}</p>
            <p><strong>Address:</strong> ${t.address}</p>
            <p><strong>Day:</strong> ${t.day}</p>
            <p><strong>Time:</strong> ${t.time}</p>
        `)})}function P(a){const t=document.createElement("button");return t.classList.add("btn","btn-primary","product-modal-button"),t.setAttribute("data-toggle","modal"),t.setAttribute("data-target","#modal"),t.setAttribute("data-products",JSON.stringify(a)),t.innerText=a.length.toString(),t}function J(){const a=$(".product-modal-button");$(a).on("click",function(){const t=JSON.parse($(this).attr("data-products")),n=$("#modal");n.find(".modal-title").text("products"),n.find(".modal-body").html(t.map(e=>`
                <p><strong>Name:</strong> ${e.name}</p>
                <p><strong>Variant:</strong> ${e.variant}</p>
                <p><strong>Quantity:</strong> ${e.quantity}</p>
                <p><strong>Additional Info:</strong> ${e.additionalInfo}</p>
                <p><strong>Price:</strong> ${e.price}</p>
            `).join(" "))})}
